# üìä E-Commerce Lakehouse with dbt

This dbt project demonstrates how to model and test data in a **modern data lakehouse** architecture using **mock e-commerce data**. The project simulates building **dimensional models** (`customers`, `orders`) on top of raw data and applying **automated data quality checks** using dbt's built-in testing framework.

---

## üß± Project Overview

- **Project Name:** `ecommerce_lakehouse`
- **Tooling:** `dbt`, `Python`, `watsonx_presto` (or compatible Presto/Trino target)
- **Environment Setup:** Fully automated via a Python script
- **Goal:** Demonstrate realistic dbt models and tests using synthetic data (no CSVs/files)

---

## üß© Data Models

### 1. `customers` (Dimension Table)

Simulated raw data of customers, including:
- `customer_id`
- `customer_name`
- `email`
- `created_at`

### 2. `orders` (Fact Table)

Simulated transactional order data, including:
- `order_id`
- `customer_id` (FK)
- `order_date`
- `order_total`

Only orders with status `completed` are included in the model.

---

## ‚úÖ dbt Tests Performed

### `customers` Model

| Column        | Test       | Description                          |
|---------------|------------|--------------------------------------|
| `customer_id` | `not_null` | Ensures every customer has an ID     |
| `customer_id` | `unique`   | Ensures no duplicate customer IDs    |
| `email`       | `not_null` | Validates presence of email address  |

### `orders` Model

| Column        | Test             | Description                                      |
|---------------|------------------|--------------------------------------------------|
| `order_id`    | `not_null`       | All orders must have an ID                      |
| `order_id`    | `unique`         | Order IDs must not repeat                       |
| `customer_id` | `not_null`       | Each order must reference a customer            |
| `customer_id` | `relationships`  | Must match an ID in the `customers` model       |

---

## ‚úÖ Expected Test Results

| Model     | Column        | Test             | Expected Result | Reason |
|-----------|---------------|------------------|-----------------|--------|
| customers | `customer_id` | `not_null`       | ‚úÖ Pass          | All customers have an ID |
| customers | `customer_id` | `unique`         | ‚úÖ Pass          | No duplicate IDs |
| customers | `email`       | `not_null`       | ‚ùå Fail          | One customer has a missing email |
| orders    | `order_id`    | `not_null`       | ‚úÖ Pass          | All orders have an ID |
| orders    | `order_id`    | `unique`         | ‚úÖ Pass          | All IDs are distinct |
| orders    | `customer_id` | `not_null`       | ‚úÖ Pass          | No null customer references |
| orders    | `customer_id` | `relationships`  | ‚ùå Fail          | One order references a customer ID not present in `customers` |

---

## üí° Notes

- Failing tests are **intentional** to demonstrate dbt‚Äôs data validation capabilities.
- These failures help teams identify issues like:
  - Incomplete customer onboarding (missing email)
  - Dirty joins between raw data and reference dimensions

---

## üõ†Ô∏è Optional Enhancements

- Add a `staging/` layer for raw-to-clean data flow
- Add `incremental` models to simulate large-scale ETL
- Integrate with dbt Semantic Layer and dashboards
- Add dbt snapshots for tracking SCD changes over time

<img width="50%" height="50%" alt="Screenshot 2025-06-04 at 5 01 48‚ÄØAM" src="https://github.com/user-attachments/assets/df065007-29bf-4126-be48-9c9e96549f39" />

<img width="50%" height="50%" alt="Screenshot 2025-06-04 at 5 01 30‚ÄØAM" src="https://github.com/user-attachments/assets/b93dbab1-85ae-4c2d-8e99-cdb4eeb7071f" />

<img width="50%" height="50%" alt="Screenshot 2025-06-04 at 5 02 37‚ÄØAM" src="https://github.com/user-attachments/assets/608ae187-2422-41da-a011-bc88366ce06c" />

<img width="50%" height="50%" alt="Screenshot 2025-06-04 at 5 03 03‚ÄØAM" src="https://github.com/user-attachments/assets/268a614a-cda7-4f5f-8c03-deda0eeb0194" />

<img width="50%" height="50%" alt="Screenshot 2025-06-04 at 5 03 16‚ÄØAM" src="https://github.com/user-attachments/assets/b0f92ade-f57f-488e-9760-2d75ac76d6a2" />

<img width="50%" height="50%" alt="Screenshot 2025-06-04 at 5 03 26‚ÄØAM" src="https://github.com/user-attachments/assets/55f6ccfc-08fb-46b8-a573-b795d9d275a3" />
